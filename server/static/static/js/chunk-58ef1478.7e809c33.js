(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-58ef1478"],{4758:function(t,a,e){"use strict";e("aa51")},4781:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t._self._c;return a("div",{staticClass:"page-wrapper",attrs:{id:"admin-manage"}},[a("h1",{staticClass:"main-title"},[t._v("添加管理员")]),t._v(" "),a("div",{staticClass:"wrapper top-wrapper"},[a("div",{staticClass:"main-card left"},[a("div",{staticClass:"title-wrapper"},[t._v("总数："+t._s(this.total))]),t._v(" "),a("div",{staticClass:"content-wrapper"},[a("div",{staticClass:"admin admin-card"},[a("i",{staticClass:"el-icon-user"}),t._v("\n          普通管理员: "+t._s(t.adminCount)+"\n        ")]),t._v(" "),a("div",{staticClass:"superAdmin admin-card"},[a("i",{staticClass:"el-icon-user"}),t._v("\n          超级管理员: "+t._s(t.superAdminCount)+"\n        ")])])]),t._v(" "),a("div",{staticClass:"main-card right"},[a("AddAdminForm")],1)]),t._v(" "),a("h1",{staticClass:"main-title"},[t._v("已有管理员列表")]),t._v(" "),a("div",{staticClass:"wrapper main-card"},[a("AdminTable",{attrs:{"table-data":t.adminsTableData}})],1)])},r=[],s=e("c80c"),o=(e("96cf"),e("3b8d")),l=(e("7f7f"),function(){var t=this,a=t._self._c;return a("div",{staticClass:"AddAdminForm"},[a("el-form",{ref:"form",staticClass:"form",attrs:{model:t.formData}},[a("el-form-item",{attrs:{label:"管理员名",required:"",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.formData.name,callback:function(a){t.$set(t.formData,"name","string"===typeof a?a.trim():a)},expression:"formData.name"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"学工号",required:"",prop:"account"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.formData.account,callback:function(a){t.$set(t.formData,"account","string"===typeof a?a.trim():a)},expression:"formData.account"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"手机号",required:"",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.formData.phone,callback:function(a){t.$set(t.formData,"phone","string"===typeof a?a.trim():a)},expression:"formData.phone"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码",required:"",prop:"password"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.formData.password,callback:function(a){t.$set(t.formData,"password","string"===typeof a?a.trim():a)},expression:"formData.password"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"选择身份",required:""}},[a("el-radio",{attrs:{label:"admin"},model:{value:t.formData.role,callback:function(a){t.$set(t.formData,"role",a)},expression:"formData.role"}},[t._v("普通管理员")]),t._v(" "),a("el-radio",{attrs:{label:"superAdmin"},model:{value:t.formData.role,callback:function(a){t.$set(t.formData,"role",a)},expression:"formData.role"}},[t._v("超级管理员")])],1)],1),t._v(" "),a("div",{staticClass:"btn-wrapper"},[a("el-popconfirm",{attrs:{title:"您确定填写的信息无误吗"},on:{onConfirm:t.handleSubmit}},[a("el-button",{attrs:{slot:"reference",type:"primary",circle:"",icon:"el-icon-plus"},slot:"reference"})],1)],1)],1)}),i=[],c=e("c24f"),m={name:"AddAdminForm",data:function(){return{formData:{name:"",account:"",phone:"",password:"",role:"admin"}}},methods:{handleSubmit:function(){var t=this;this.$refs.form.validate((function(a){a?Object(c["a"])(t.formData).then((function(){t.$message.success("注册管理员成功"),t.$parent.fetchAdminTableData().then((function(){t.$message.success("数据已更新")}))})):t.$message.error("请填充完整信息")}))}}},u=m,d=(e("4758"),e("2877")),p=Object(d["a"])(u,l,i,!1,null,"1a6563b0",null),f=p.exports,b=function(){var t=this,a=t._self._c;return a("div",{attrs:{calss:"AdminTable"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[a("el-table-column",{attrs:{prop:"name",label:"姓名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"account",label:"工号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),t._v(" "),a("el-table-column",{attrs:{label:"身份"},scopedSlots:t._u([{key:"default",fn:function(e){return["admin"===e.row.role?a("span",{staticClass:"admin"},[t._v(t._s(e.row.role.toUpperCase()))]):t._e(),t._v(" "),"superAdmin"===e.row.role?a("span",{staticClass:"superAdmin"},[t._v(t._s(e.row.role.toUpperCase()))]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"管理宿舍楼"},scopedSlots:t._u([{key:"default",fn:function(e){return["admin"===e.row.role?a("div",{staticClass:"room-wrap"},t._l(e.row.buildings,(function(e){return a("span",{key:e.id},[t._v("\n            "+t._s(e.name)+"\n          ")])})),0):a("div",{staticClass:"all-room"},[t._v("\n          所有宿舍\n        ")])]}}])})],1)],1)},v=[],_={name:"AdminTable",data:function(){return{}},props:{tableData:{type:Array,default:function(){return[]}}}},h=_,C=(e("7458"),Object(d["a"])(h,b,v,!1,null,"05e97952",null)),w=C.exports,D={name:"adminManage",components:{AddAdminForm:f,AdminTable:w},data:function(){return{adminsTableData:[],total:0,superAdminCount:0,adminCount:0}},mounted:function(){this.fetchAdminTableData()},methods:{fetchAdminTableData:function(){var t=Object(o["a"])(Object(s["a"])().mark((function t(){var a=this;return Object(s["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["b"])().then((function(t){a.adminsTableData=t.data.admins,a.total=t.data.total,a.superAdminCount=t.data.admins.filter((function(t){return"superAdmin"===t.role})).length,a.adminCount=a.total-a.superAdminCount}));case 2:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()}},A=D,g=(e("8b94"),Object(d["a"])(A,n,r,!1,null,"694428ba",null));a["default"]=g.exports},"6a69":function(t,a,e){},7458:function(t,a,e){"use strict";e("6a69")},"8b94":function(t,a,e){"use strict";e("bcb5")},aa51:function(t,a,e){},bcb5:function(t,a,e){}}]);