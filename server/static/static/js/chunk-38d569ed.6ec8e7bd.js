(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-38d569ed"],{4781:function(t,a,e){"use strict";e.r(a);var n=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"page-wrapper",attrs:{id:"admin-manage"}},[e("h1",{staticClass:"main-title"},[t._v("添加管理员")]),t._v(" "),e("div",{staticClass:"wrapper top-wrapper"},[e("div",{staticClass:"main-card left"},[e("div",{staticClass:"title-wrapper"},[t._v("总数："+t._s(this.total))]),t._v(" "),e("div",{staticClass:"content-wrapper"},[e("div",{staticClass:"admin admin-card"},[e("i",{staticClass:"el-icon-user"}),t._v("\n          普通管理员: "+t._s(t.adminCount)+"\n        ")]),t._v(" "),e("div",{staticClass:"superAdmin admin-card"},[e("i",{staticClass:"el-icon-user"}),t._v("\n          超级管理员: "+t._s(t.superAdminCount)+"\n        ")])])]),t._v(" "),e("div",{staticClass:"main-card right"},[e("AddAdminForm")],1)]),t._v(" "),e("h1",{staticClass:"main-title"},[t._v("已有管理员列表")]),t._v(" "),e("div",{staticClass:"wrapper main-card"},[e("AdminTable",{attrs:{"table-data":t.adminsTableData}})],1)])},r=[],s=(e("96cf"),e("3b8d")),o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"AddAdminForm"},[e("el-form",{ref:"form",staticClass:"form",attrs:{model:t.formData}},[e("el-form-item",{attrs:{label:"管理员名",required:"",prop:"name"}},[e("el-input",{attrs:{placeholder:"请输入"},model:{value:t.formData.name,callback:function(a){t.$set(t.formData,"name","string"===typeof a?a.trim():a)},expression:"formData.name"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"学工号",required:"",prop:"account"}},[e("el-input",{attrs:{placeholder:"请输入"},model:{value:t.formData.account,callback:function(a){t.$set(t.formData,"account","string"===typeof a?a.trim():a)},expression:"formData.account"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"手机号",required:"",prop:"phone"}},[e("el-input",{attrs:{placeholder:"请输入"},model:{value:t.formData.phone,callback:function(a){t.$set(t.formData,"phone","string"===typeof a?a.trim():a)},expression:"formData.phone"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"密码",required:"",prop:"password"}},[e("el-input",{attrs:{placeholder:"请输入"},model:{value:t.formData.password,callback:function(a){t.$set(t.formData,"password","string"===typeof a?a.trim():a)},expression:"formData.password"}})],1),t._v(" "),e("el-form-item",{attrs:{label:"选择身份",required:""}},[e("el-radio",{attrs:{label:"admin"},model:{value:t.formData.role,callback:function(a){t.$set(t.formData,"role",a)},expression:"formData.role"}},[t._v("普通管理员")]),t._v(" "),e("el-radio",{attrs:{label:"superAdmin"},model:{value:t.formData.role,callback:function(a){t.$set(t.formData,"role",a)},expression:"formData.role"}},[t._v("超级管理员")])],1)],1),t._v(" "),e("div",{staticClass:"btn-wrapper"},[e("el-popconfirm",{attrs:{title:"您确定填写的信息无误吗"},on:{onConfirm:t.handleSubmit}},[e("el-button",{attrs:{slot:"reference",type:"primary",circle:"",icon:"el-icon-plus"},slot:"reference"})],1)],1)],1)},l=[],i=e("c24f"),c={name:"AddAdminForm",data:function(){return{formData:{name:"",account:"",phone:"",password:"",role:"admin"}}},methods:{handleSubmit:function(){var t=this;this.$refs.form.validate((function(a){a?Object(i["a"])(t.formData).then((function(){t.$message.success("注册管理员成功"),t.$parent.fetchAdminTableData().then((function(){t.$message.success("数据已更新")}))})):t.$message.error("请填充完整信息")}))}}},m=c,u=(e("f565"),e("2877")),d=Object(u["a"])(m,o,l,!1,null,"8f0db268",null),p=d.exports,f=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{calss:"AdminTable"}},[e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData}},[e("el-table-column",{attrs:{prop:"name",label:"姓名"}}),t._v(" "),e("el-table-column",{attrs:{prop:"account",label:"工号"}}),t._v(" "),e("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),t._v(" "),e("el-table-column",{attrs:{label:"身份"},scopedSlots:t._u([{key:"default",fn:function(a){return["admin"===a.row.role?e("span",{staticClass:"admin"},[t._v(t._s(a.row.role.toUpperCase()))]):t._e(),t._v(" "),"superAdmin"===a.row.role?e("span",{staticClass:"superAdmin"},[t._v(t._s(a.row.role.toUpperCase()))]):t._e()]}}])}),t._v(" "),e("el-table-column",{attrs:{label:"管理宿舍楼"},scopedSlots:t._u([{key:"default",fn:function(a){return["admin"===a.row.role?e("div",{staticClass:"room-wrap"},t._l(a.row.buildings,(function(a){return e("span",{key:a.id},[t._v("\n            "+t._s(a.name)+"\n          ")])})),0):e("div",{staticClass:"all-room"},[t._v("\n          所有宿舍\n        ")])]}}])})],1)],1)},v=[],b={name:"AdminTable",data:function(){return{}},props:{tableData:{type:Array,default:function(){return[]}}}},_=b,h=(e("892a"),Object(u["a"])(_,f,v,!1,null,"3413f3ff",null)),C=h.exports,w={name:"adminManage",components:{AddAdminForm:p,AdminTable:C},data:function(){return{adminsTableData:[],total:0,superAdminCount:0,adminCount:0}},mounted:function(){this.fetchAdminTableData()},methods:{fetchAdminTableData:function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["b"])().then((function(t){a.adminsTableData=t.data.admins,a.total=t.data.total,a.superAdminCount=t.data.admins.filter((function(t){return"superAdmin"===t.role})).length,a.adminCount=a.total-a.superAdminCount}));case 2:case"end":return t.stop()}}),t)})));function a(){return t.apply(this,arguments)}return a}()}},D=w,A=(e("a41d"),Object(u["a"])(D,n,r,!1,null,"0f927cf6",null));a["default"]=A.exports},4882:function(t,a,e){},"6b37":function(t,a,e){},"892a":function(t,a,e){"use strict";var n=e("bc4e"),r=e.n(n);r.a},a41d:function(t,a,e){"use strict";var n=e("4882"),r=e.n(n);r.a},bc4e:function(t,a,e){},f565:function(t,a,e){"use strict";var n=e("6b37"),r=e.n(n);r.a}}]);